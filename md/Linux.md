## Linus Torvalds

![linus](../md.assets/linus.jpg)



## 磁盘分区的配置

在目前的 Linux 环境下， 如果磁盘没有超过 2TB 的话，那么 Linux **默认是会以 MBR** 模式来处理分区表的。可以安装的时候加上某些参数， 强迫系统使用 GPT 的分区表来配置磁盘。而预计实际分区的情况如下：

| 所需目录  | 磁盘容量 |  文件空间  | 分区格式 |
| :-------: | :------: | :--------: | :------: |
| BIOS boot |   2MB    | 系统自定义 |  主分区  |
|   /boot   |   1GB    |    xfs     |  主分区  |
|     /     |   10GB   |    xfs     | LVM方式  |
|   /home   |   5GB    |    xfs     | LVM方式  |
|   swap    |   1GB    |    swap    | LVM方式  |



## 装置类型

- **标准分区区**：就是我们一直谈的分区槽，类似 /dev/vda1 之类的分区就是了。
- **LVM**：这是一种可以**弹性增加/削减**文件系统容量的装置设定。
- **LVM紧张供应**：是 LVM 的进阶版，与传统 LVM 直接分配固定的容量不同，  LVM 紧张供应可以让你在使用多少容量才分配磁盘多少容量给你，所以如果LVM 装置内的数据量较少，那么你的磁盘其实还可以作更多的资料储存，而不会被平白无故的占用。



## 文件系统

**就是实际格式化的时候，可以格式化成什么文件系统的意思**



+ **ext2/ext3/ext4**：Linux 早期适用的文件系统类型。由于 ext3/ext4 文件系统多了日志的记录， 对于系统的复原比较快速。不过由于磁盘容量越来越大，近来比较少使用 ext4 项目了。
+ **swap**：就是磁盘仿真成为内存，由于 swap 不会使用到目录树的挂载，所以用 swap 就不需要指定挂载点。
+ **BIOS boot**：就是 GPT 分区表可能会使用到的项目，若你使用 MBR 分区，那就不需要这个项目了。
+  **xfs**：这个是目前 CentOS 预设的文件系统，最早是由大型服务器所开发出来的。 他对于大容量的磁盘管理
    非常好，而且格式化的时候速度相当快，很适合当今动不动就是好几个 TB 的磁盘的环境，**非常常用。**
+  **vfat**：同时被 Linux 与 Windows 所支持的文件系统类型。如果主机硬盘内同时存在 Windows 与 Linux操作系统，为了数据的交换， 确实可以建置一个 vfat 的文件系统。



## KDUMP
这个项目主要在处理，当 Linux 系统因为核心问题导致的当机事件时，会将该当机事件的内存内数据储存出来的一项特色。若不需要，也能够关闭它，对系统的影响似乎并不太大。



## 指令基本格式

**`command [options] [arguments]`，command称为指令，options称为选项，arguments称为参数**

选项和参数都作为Shell命令执行时的输入，它们**之间用空格分隔开，空格的多少不影响指令的执行**。

- **Linux是区分大小写的**
- 如果指令太长可以输入**`\`**，之后**按回车**，使指令连续到下一行

**一般来说**，后面跟的选项如果**单字符**选项前使用**`-`**。**单词选项**前使用**`--`**

- 这是一般的情况，有些命令还是不归属这种规律的，相对较少。

- 例子：**`ls -a`**和**`ls -all`**，单个字符**`a` **使用**`-`**，一个单词**`all` **使用**`--`**

在Linux中，**可执行的文件**也进行了分类：

- **内置命令**：出于效率的考虑，将一些常用命令的解释程序**构造在Shell内部**。
- **外置命令**：存放在/bin、/sbin目录下的命令
- **实用程序**：存放在/usr/bin、/usr/sbin、/usr/share、/usr/local/bin等目录下的实用程序
- **用户程序**：用户程序经过编译生成可执行文件后，可作为Shell命令运行
- **Shell脚本**：由Shell语言编写的批处理文件，可作为Shell命令运行



## 常用快捷键

**`Tab`**：命令补全和文件补全（按一次自动补全，连续按两次，提示所有以输入开头字母的所有命令）

**`Ctrl` + `a`**：将光标移到行首

**`Ctrl` + `e`**：将光标移到行尾

**`Ctrl` + `c`**：中断目前程序

**`Ctrl` + `d`**：相当于离开（exit）

**`Ctrl` + ` l`**：清空终端，相当于（clear）

**`Ctrl` + ` z`**：将正在运行的程序送到后台

**`Ctrl` + `u`**：删除当前光标到行首的命令

**`shift` + ` Page UP` / `Page Down`**：上下翻页



## 指令

### 常用指令

+ **`date`**：显示日期
  +   **`date +%Y%m%d-%H%M%S`**：2019/04/12-15:32:59


+ **`cal`**：显示日历

  + **`cal`**：今天的日历

  * **`cal 2015`**：当年的日历
  * **`cal 07 1996`**：当年当月的日历

+ **`bc`**：简单好用的计算器

  + **`scale=n`**：n为小数点位数，bc预设只输出整数，如果要输出浮点数，必须执行该命令
  + **`+`**：加法
  + **`-`**：减法
  + **`*`**：乘法
  + **`/`**：除法
  + **`^`**：指数
  + **`%`**：取余
  + **`quit`**：退出


* **`nano`**：简单的文本编辑器
  * 界面包含按键提示



## 帮助

+ **`--help`**：指令的基本用法与选项介绍
+ **`man`**： manual 的缩写，将指令的具体信息（man page）显示出来
  + man page的数据默认存放在**`/usr/share/man`**目录里面
  + **`/String`**：在man page中向下搜寻字符串
  + **`？String`**：在man page中向上搜寻字符串
  + **`n`**：继续下一个搜寻
  + **`N`**：反向搜寻
  + **` q`**：结束搜寻
+ **`info`**：与 man 类似， info 会将文档分成一个个页面，每个页面可以进行跳转



#### 1. man page

**man page组成部分**

| 代号        | 内容说明                                                     |
| ----------- | ------------------------------------------------------------ |
| NAME        | 简短的指令、数据名称说明                                     |
| SYNOPSIS    | 简短的指令下达语法(syntax)简介                               |
| DESCRIPTION | 较为完整的说明，这部分最好仔细看看                           |
| OPTIONS     | 针对 SYNOPSIS 部分中，有列举的所有可用的选项说明             |
| COMMANDS    | 当这个程序(软件)在执行的时候，可以在此程序(软件)中下达的指令 |
| FILES       | 这个程序或数据所使用或参考或连结到的某些文件                 |
| SEE ALSO    | 可以参考的，跟这个指令或数据有相关的其他说明                 |
| EXAMPLE     | 一些可以参考的范例                                           |



**man page中第一行括号中数字的含义**

| 代号  | 代表内容                                                     |
| ----- | ------------------------------------------------------------ |
| **1** | **用户在 shell 环境中可以操作的指令或可执行文件**            |
| 2     | 系统核心可呼叫的函数与工具等                                 |
| 3     | 一些常用的函数(function)与函式库(library)，大部分为 C 的函式库(libc) |
| 4     | 装置文件的说明，通常在/dev 下的文件                          |
| **5** | **配置文件或者是某些文件的格式**                             |
| 6     | 游戏                                                         |
| 7     | 惯例与协议等，例如 Linux 文件系统、网络协议、ASCII code 等等的说明 |
| **8** | **系统管理员可用的管理指令**                                 |
| 9     | 跟 kernel 有关的文件                                         |



#### 2. info page

**info page组成部分**

| 代号 | 内容说明                                        |
| ---- | ----------------------------------------------- |
| File | 文件来源                                        |
| Node | 当前节点                                        |
| Next | 后一个节点                                      |
| Up   | 回到上一层的节点总揽画面，也可以按下U回到上一层 |
| Prev | 前一个节点                                      |



**3. 其他有用的文件**

更多的说明文件都存放在**`/usr/share/doc`**目录中



## 关机

```bash
# synchronize，为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘上，因此关机之前需 要先进行sync同步操作，即使shutdown/reboot/halt等指令在关机前已经进行了sync的调用
# 普通用户也可使用，普通用户只保存自己的数据，管理员可以保存整个系统的数据
sync

```

```bash
# 关机，默认1分钟后关机，关机讯息会显示在登入者的屏幕上
# 只有管理员有权限执行
shutdown -[h|r|k] [时间] '警告信息'
# 可以指定具体时间
shutdown -[h|r|k] 19:30 '警告信息'
# 可以指定多少分钟后
shutdown -[h|r|k] 10
# 立即关机
shutdown -[h|r|k] now

# 将系统的服务停掉后，立即关机，常用
shutdown -h [时间] '警告信息'

# 将系统的服务停掉之后就重新启动，常用
shutdown -r [时间] '警告信息'

# 不进行关机，只发送警告讯息
shutdown -k [时间] '警告信息'

# 取消已经在进行的shutdown指令
shutdown -k [时间] '警告信息'
```

```bash
# 重启
reboot
```

```bash
# 系统停止，屏幕可能会保留系统已经停止的讯息，其实就是调用shutdown -h
halt
```

```bash
# 系统关机，没有提供额外的电力，屏幕空白
poweroff
```
