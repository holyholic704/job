 

**备份的目的**

做灾难恢复：对损坏的数据进行恢复和还原

需求改变：因需求改变而需要把数据还原到改变以前

测试：测试新功能是否可用

 

**备份需要考虑的问题**

1、可以容忍丢失多长时间的数据；

2、恢复数据要在多长时间内完； 

3、恢复的时候是否需要持续提供服务；

4、恢复的对象，是整个库，多个表，还是单个库，单个表。

 

**MyISAM****不支持热备，InnoDB支持热备，但是需要专门的工具**

 

**数据的备份类型**

**完全备份：**指的是备份整个数据集(即整个数据库)

**部分备份：**指的是备份部分数据集(例如：只备份一个表)

**部分备份又分为增量备份和差异备份**

**增量备份：**指的是备份自上一次备份以来(增量或完全)以来变化的数据；特点：节约空间、还原麻烦 

**差异备份：**指的是备份自上一次完全备份以来变化的数据；特点：浪费空间、还原比增量备份简单

**建议使用完全备份和差异备份的结合**

 

**备份数据的方式**

**热备份：**指的是当数据库进行备份时，数据库的读写操作均不是受影响 

**温备份：**指的是当数据库进行备份时，数据库的读操作可以执行，但是不能执行写操作 

**冷备份：**指的是当数据库进行备份时，数据库不能进行读写操作，即数据库要下线

 

**物理备份一般就是通过tar，cp等命令直接打包复制数据库的数据文件达到备份的效果** 

**逻辑备份一般就是通过特定工具从数据库中导出数据并另存备份(逻辑备份会丢失数据精度)**

 

**备份工具**

**mysqldump**：逻辑备份工具，适用于所有的存储引擎，支持温备、完全备份、部分备份、对于InnoDB存储引擎支持热备 

**cp****，tar等归档复制工具**：物理备份工具，适用于所有的存储引擎，冷备、完全备份、部分备份

**lvm2 snapshot**：几乎热备，借助文件系统管理工具进行备份

**mysqlhotcopy**：名不副实的的一个工具，几乎冷备，仅支持MyISAM存储引擎

**xtrabackup**：一款非常强大的InnoDB/XtraDB热备工具，支持完全备份、增量备份，由percona提供

 

**mysqldump****基本语法**

**mysqldump****常用来做温备，所以我们首先需要对想备份的数据施加读锁**

**备份一个数据库**

mysqldump -u username -p 数据库名 表名1 表名2 … > *backup*.sql

**备份多个数据库**

mysqldump -u username -p --databases 数据库名1，数据库名2 … > *backup*.sql

**备份所有数据库**

mysqldump -u username -p --all-databases > *backup*.sql

**数据还原**

*mysql -u root -p* 数据库名 *< backup.sql*

 

 